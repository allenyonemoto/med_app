{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{API_URL}from'../../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[password,setPassword]=useState(\"\");const[email,setEmail]=useState('');const navigate=useNavigate();useEffect(()=>{if(sessionStorage.getItem(\"auth-token\")){navigate(\"/\");}},[]);const login=async e=>{e.preventDefault();const res=await fetch(\"\".concat(API_URL,\"/api/auth/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});const json=await res.json();if(json.authtoken){sessionStorage.setItem('auth-token',json.authtoken);sessionStorage.setItem('email',email);navigate('/');window.location.reload();}else{if(json.errors){for(const error of json.errors){alert(error.msg);}}else{alert(json.error);}}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-text\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-text\",children:[\"Are you a new member?\",/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",style:{color:'#2190FF'},children:\"Sign Up Here\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"login-form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:login,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:e=>setEmail(e.target.value),type:\"email\",name:\"email\",id:\"email\",className:\"form-control\",placeholder:\"Enter your email\",\"aria-describedby\":\"helpId\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:e=>setPassword(e.target.value),type:\"password\",name:\"password\",id:\"password\",className:\"form-control\",placeholder:\"Enter your password\",\"aria-describedby\":\"helpId\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mb-2 mr-1 waves-effect waves-light\",children:\"Login\"})})]})})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","API_URL","jsx","_jsx","jsxs","_jsxs","Login","password","setPassword","email","setEmail","navigate","sessionStorage","getItem","login","e","preventDefault","res","fetch","concat","method","headers","body","JSON","stringify","json","authtoken","setItem","window","location","reload","errors","error","alert","msg","children","className","to","style","color","onSubmit","htmlFor","value","onChange","target","type","name","id","placeholder"],"sources":["/home/project/med_app/src/Components/Login/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { API_URL } from '../../config';\nconst Login = () => {\n  const [password, setPassword] = useState(\"\");\n  const [email, setEmail] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (sessionStorage.getItem(\"auth-token\")) {\n      navigate(\"/\");\n    }\n  }, []);\n  const login = async (e) => {\n    e.preventDefault();\n    const res = await fetch(`${API_URL}/api/auth/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password,\n      }),\n    });\n    const json = await res.json();\n    if (json.authtoken) {\n      sessionStorage.setItem('auth-token', json.authtoken);\n      sessionStorage.setItem('email', email);\n      navigate('/');\n      window.location.reload();\n    } else {\n      if (json.errors) {\n        for (const error of json.errors) {\n          alert(error.msg);\n        }\n      } else {\n        alert(json.error);\n      }\n    }\n  };\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"login-grid\">\n          <div className=\"login-text\">\n            <h2>Login</h2>\n          </div>\n          <div className=\"login-text\">\n            Are you a new member? \n            <span>\n              <Link to=\"/signup\" style={{ color: '#2190FF' }}>\n                Sign Up Here\n              </Link>\n            </span>\n          </div>\n          <br />\n          <div className=\"login-form\">\n            <form onSubmit={login}>\n              <div className=\"form-group\">\n                <label htmlFor=\"email\">Email</label>\n                <input \n                  value={email} \n                  onChange={(e) => setEmail(e.target.value)} \n                  type=\"email\" \n                  name=\"email\" \n                  id=\"email\" \n                  className=\"form-control\" \n                  placeholder=\"Enter your email\" \n                  aria-describedby=\"helpId\" \n                />\n              </div>\n              <div className=\"form-group\">\n                    <label htmlFor=\"password\">Password</label>\n                    <input\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        type=\"password\"\n                        name=\"password\"\n                        id=\"password\"\n                        className=\"form-control\"\n                        placeholder=\"Enter your password\"\n                        aria-describedby=\"helpId\"/>\n                </div>\n              <div className=\"btn-group\">\n                <button type=\"submit\" className=\"btn btn-primary mb-2 mr-1 waves-effect waves-light\">\n                  Login\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default Login;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,OAAO,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACvC,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAc,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAC9BF,SAAS,CAAC,IAAM,CACd,GAAIc,cAAc,CAACC,OAAO,CAAC,YAAY,CAAC,CAAE,CACxCF,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAAE,EAAE,CAAC,CACN,KAAM,CAAAG,KAAK,CAAG,KAAO,CAAAC,CAAC,EAAK,CACzBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIlB,OAAO,oBAAmB,CACnDmB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBf,KAAK,CAAEA,KAAK,CACZF,QAAQ,CAAEA,QACZ,CAAC,CACH,CAAC,CAAC,CACF,KAAM,CAAAkB,IAAI,CAAG,KAAM,CAAAR,GAAG,CAACQ,IAAI,CAAC,CAAC,CAC7B,GAAIA,IAAI,CAACC,SAAS,CAAE,CAClBd,cAAc,CAACe,OAAO,CAAC,YAAY,CAAEF,IAAI,CAACC,SAAS,CAAC,CACpDd,cAAc,CAACe,OAAO,CAAC,OAAO,CAAElB,KAAK,CAAC,CACtCE,QAAQ,CAAC,GAAG,CAAC,CACbiB,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAC,IAAM,CACL,GAAIL,IAAI,CAACM,MAAM,CAAE,CACf,IAAK,KAAM,CAAAC,KAAK,GAAI,CAAAP,IAAI,CAACM,MAAM,CAAE,CAC/BE,KAAK,CAACD,KAAK,CAACE,GAAG,CAAC,CAClB,CACF,CAAC,IAAM,CACLD,KAAK,CAACR,IAAI,CAACO,KAAK,CAAC,CACnB,CACF,CACF,CAAC,CACD,mBACE7B,IAAA,QAAAgC,QAAA,cACEhC,IAAA,QAAKiC,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxB9B,KAAA,QAAK+B,SAAS,CAAC,YAAY,CAAAD,QAAA,eACzBhC,IAAA,QAAKiC,SAAS,CAAC,YAAY,CAAAD,QAAA,cACzBhC,IAAA,OAAAgC,QAAA,CAAI,OAAK,CAAI,CAAC,CACX,CAAC,cACN9B,KAAA,QAAK+B,SAAS,CAAC,YAAY,CAAAD,QAAA,EAAC,uBAE1B,cAAAhC,IAAA,SAAAgC,QAAA,cACEhC,IAAA,CAACJ,IAAI,EAACsC,EAAE,CAAC,SAAS,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAJ,QAAA,CAAC,cAEhD,CAAM,CAAC,CACH,CAAC,EACJ,CAAC,cACNhC,IAAA,QAAK,CAAC,cACNA,IAAA,QAAKiC,SAAS,CAAC,YAAY,CAAAD,QAAA,cACzB9B,KAAA,SAAMmC,QAAQ,CAAE1B,KAAM,CAAAqB,QAAA,eACpB9B,KAAA,QAAK+B,SAAS,CAAC,YAAY,CAAAD,QAAA,eACzBhC,IAAA,UAAOsC,OAAO,CAAC,OAAO,CAAAN,QAAA,CAAC,OAAK,CAAO,CAAC,cACpChC,IAAA,UACEuC,KAAK,CAAEjC,KAAM,CACbkC,QAAQ,CAAG5B,CAAC,EAAKL,QAAQ,CAACK,CAAC,CAAC6B,MAAM,CAACF,KAAK,CAAE,CAC1CG,IAAI,CAAC,OAAO,CACZC,IAAI,CAAC,OAAO,CACZC,EAAE,CAAC,OAAO,CACVX,SAAS,CAAC,cAAc,CACxBY,WAAW,CAAC,kBAAkB,CAC9B,mBAAiB,QAAQ,CAC1B,CAAC,EACC,CAAC,cACN3C,KAAA,QAAK+B,SAAS,CAAC,YAAY,CAAAD,QAAA,eACrBhC,IAAA,UAAOsC,OAAO,CAAC,UAAU,CAAAN,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC1ChC,IAAA,UACIuC,KAAK,CAAEnC,QAAS,CAChBoC,QAAQ,CAAG5B,CAAC,EAAKP,WAAW,CAACO,CAAC,CAAC6B,MAAM,CAACF,KAAK,CAAE,CAC7CG,IAAI,CAAC,UAAU,CACfC,IAAI,CAAC,UAAU,CACfC,EAAE,CAAC,UAAU,CACbX,SAAS,CAAC,cAAc,CACxBY,WAAW,CAAC,qBAAqB,CACjC,mBAAiB,QAAQ,CAAC,CAAC,EAC9B,CAAC,cACR7C,IAAA,QAAKiC,SAAS,CAAC,WAAW,CAAAD,QAAA,cACxBhC,IAAA,WAAQ0C,IAAI,CAAC,QAAQ,CAACT,SAAS,CAAC,oDAAoD,CAAAD,QAAA,CAAC,OAErF,CAAQ,CAAC,CACN,CAAC,EACF,CAAC,CACJ,CAAC,EACH,CAAC,CACH,CAAC,CACH,CAAC,CAEV,CAAC,CACD,cAAe,CAAA7B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}